{"ast":null,"code":"// !!!!!!!!\n// export const BASE_URL = \"https://api.mesto.kostyarad.nomoreparties.sbs\";\nexport const BASE_URL = \"http://localhost:3000\";\nfunction getResponseData(res) {\n  if (res.ok) {\n    return res.json();\n  }\n  return Promise.reject(`Где-то ошибочка:( : ${res.status}`);\n}\nexport function register(name, email, password) {\n  return fetch(`${BASE_URL}/signup`, {\n    credentials: \"include\",\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      name,\n      email,\n      password\n    })\n  }).then(res => getResponseData(res));\n}\nexport const login = (email, password) => {\n  return fetch(`${BASE_URL}/signin`, {\n    credentials: \"include\",\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      email,\n      password\n    })\n  }).then(res => getResponseData(res)).then(data => {\n    if (data.jwt) {\n      localStorage.setItem(\"jwt\", data.jwt);\n      return data.jwt;\n    }\n  });\n};\nexport function getContent(jwt) {\n  return fetch(`${BASE_URL}/users/me`, {\n    credentials: \"include\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${jwt}`\n      //\"Authorization\": `Bearer ${localStorage.getItem('jwt')}`,\n    }\n  }).then(res => getResponseData(res)).then(data => data);\n}","map":{"version":3,"names":["BASE_URL","getResponseData","res","ok","json","Promise","reject","status","register","name","email","password","fetch","credentials","method","headers","body","JSON","stringify","then","login","data","jwt","localStorage","setItem","getContent","Authorization"],"sources":["/Users/konstantinradcenko/dev/Diploma/movies-explorer-frontend/src/utils/auth.js"],"sourcesContent":["// !!!!!!!!\n// export const BASE_URL = \"https://api.mesto.kostyarad.nomoreparties.sbs\";\nexport const BASE_URL = \"http://localhost:3000\";\n\nfunction getResponseData(res) {\n  if (res.ok) {\n    return res.json();\n  }\n  return Promise.reject(`Где-то ошибочка:( : ${res.status}`);\n}\n\nexport function register(name, email, password) {\n  return fetch(`${BASE_URL}/signup`, {\n    credentials: \"include\",\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({ name, email, password }),\n  }).then((res) => getResponseData(res));\n}\n\nexport const login = (email, password) => {\n  return fetch(`${BASE_URL}/signin`, {\n    credentials: \"include\",\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({ email, password }),\n  })\n    .then((res) => getResponseData(res))\n    .then((data) => {\n      if (data.jwt) {\n        localStorage.setItem(\"jwt\", data.jwt);\n        return data.jwt;\n      }\n    });\n};\n\nexport function getContent(jwt) {\n  return fetch(`${BASE_URL}/users/me`, {\n    credentials: \"include\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${jwt}`,\n      //\"Authorization\": `Bearer ${localStorage.getItem('jwt')}`,\n    },\n  })\n    .then((res) => getResponseData(res))\n    .then((data) => data);\n}\n"],"mappings":"AAAA;AACA;AACA,OAAO,MAAMA,QAAQ,GAAG,uBAAuB;AAE/C,SAASC,eAAeA,CAACC,GAAG,EAAE;EAC5B,IAAIA,GAAG,CAACC,EAAE,EAAE;IACV,OAAOD,GAAG,CAACE,IAAI,CAAC,CAAC;EACnB;EACA,OAAOC,OAAO,CAACC,MAAM,CAAE,uBAAsBJ,GAAG,CAACK,MAAO,EAAC,CAAC;AAC5D;AAEA,OAAO,SAASC,QAAQA,CAACC,IAAI,EAAEC,KAAK,EAAEC,QAAQ,EAAE;EAC9C,OAAOC,KAAK,CAAE,GAAEZ,QAAS,SAAQ,EAAE;IACjCa,WAAW,EAAE,SAAS;IACtBC,MAAM,EAAE,MAAM;IACdC,OAAO,EAAE;MACP,cAAc,EAAE;IAClB,CAAC;IACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;MAAET,IAAI;MAAEC,KAAK;MAAEC;IAAS,CAAC;EAChD,CAAC,CAAC,CAACQ,IAAI,CAAEjB,GAAG,IAAKD,eAAe,CAACC,GAAG,CAAC,CAAC;AACxC;AAEA,OAAO,MAAMkB,KAAK,GAAGA,CAACV,KAAK,EAAEC,QAAQ,KAAK;EACxC,OAAOC,KAAK,CAAE,GAAEZ,QAAS,SAAQ,EAAE;IACjCa,WAAW,EAAE,SAAS;IACtBC,MAAM,EAAE,MAAM;IACdC,OAAO,EAAE;MACP,cAAc,EAAE;IAClB,CAAC;IACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;MAAER,KAAK;MAAEC;IAAS,CAAC;EAC1C,CAAC,CAAC,CACCQ,IAAI,CAAEjB,GAAG,IAAKD,eAAe,CAACC,GAAG,CAAC,CAAC,CACnCiB,IAAI,CAAEE,IAAI,IAAK;IACd,IAAIA,IAAI,CAACC,GAAG,EAAE;MACZC,YAAY,CAACC,OAAO,CAAC,KAAK,EAAEH,IAAI,CAACC,GAAG,CAAC;MACrC,OAAOD,IAAI,CAACC,GAAG;IACjB;EACF,CAAC,CAAC;AACN,CAAC;AAED,OAAO,SAASG,UAAUA,CAACH,GAAG,EAAE;EAC9B,OAAOV,KAAK,CAAE,GAAEZ,QAAS,WAAU,EAAE;IACnCa,WAAW,EAAE,SAAS;IACtBE,OAAO,EAAE;MACP,cAAc,EAAE,kBAAkB;MAClCW,aAAa,EAAG,UAASJ,GAAI;MAC7B;IACF;EACF,CAAC,CAAC,CACCH,IAAI,CAAEjB,GAAG,IAAKD,eAAe,CAACC,GAAG,CAAC,CAAC,CACnCiB,IAAI,CAAEE,IAAI,IAAKA,IAAI,CAAC;AACzB"},"metadata":{},"sourceType":"module","externalDependencies":[]}