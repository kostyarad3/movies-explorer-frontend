{"ast":null,"code":"import _classCallCheck from\"/Users/konstantinradcenko/dev/Diploma/movies-explorer-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/konstantinradcenko/dev/Diploma/movies-explorer-frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";var Api=/*#__PURE__*/function(){function Api(config){_classCallCheck(this,Api);this._url=config.baseUrl;this._headers=config.headers;this._credentials=config.credentials;}_createClass(Api,[{key:\"_getResponseData\",value:function _getResponseData(response){if(response.ok){return response.json();}return Promise.reject(\"\\u0413\\u0434\\u0435-\\u0442\\u043E \\u043E\\u0448\\u0438\\u0431\\u043E\\u0447\\u043A\\u0430:( : \".concat(response.status));}},{key:\"getInitialData\",value:function getInitialData(){return Promise.all([this.getUserInfo(),this.getInitialCards()]);}},{key:\"getUserInfo\",value:function getUserInfo(){var _this=this;return fetch(\"\".concat(this._url,\"/users/me\"),{method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(localStorage.getItem(\"jwt\"))},credentials:this._credentials}).then(function(response){return _this._getResponseData(response);});}},{key:\"getInitialCards\",value:function getInitialCards(){var _this2=this;return fetch(\"\".concat(this._url,\"/cards\"),{method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(localStorage.getItem(\"jwt\"))},credentials:this._credentials}).then(function(response){return _this2._getResponseData(response);});}},{key:\"editUserInfo\",value:function editUserInfo(name,email){var _this3=this;return fetch(\"\".concat(this._url,\"/users/me\"),{method:\"PATCH\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(localStorage.getItem(\"jwt\"))},credentials:this._credentials,body:JSON.stringify({name:name,email:email})}).then(function(response){return _this3._getResponseData(response);});}},{key:\"deleteCard\",value:function deleteCard(cardId){var _this4=this;return fetch(\"\".concat(this._url,\"/cards/\").concat(cardId),{method:\"DELETE\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(localStorage.getItem(\"jwt\"))},credentials:this._credentials}).then(function(response){return _this4._getResponseData(response);});}}]);return Api;}();var api=new Api({// baseUrl: \"https://api.mesto.kostyarad.nomoreparties.sbs\",\ncredentials:\"include\",baseUrl:\"http://localhost:3000\"});export default api;","map":{"version":3,"names":["Api","config","_classCallCheck","_url","baseUrl","_headers","headers","_credentials","credentials","_createClass","key","value","_getResponseData","response","ok","json","Promise","reject","concat","status","getInitialData","all","getUserInfo","getInitialCards","_this","fetch","method","Authorization","localStorage","getItem","then","_this2","editUserInfo","name","email","_this3","body","JSON","stringify","deleteCard","cardId","_this4","api"],"sources":["/Users/konstantinradcenko/dev/Diploma/movies-explorer-frontend/src/utils/api.js"],"sourcesContent":["class Api {\n  constructor(config) {\n    this._url = config.baseUrl;\n    this._headers = config.headers;\n    this._credentials = config.credentials;\n  }\n\n  _getResponseData(response) {\n    if (response.ok) {\n      return response.json();\n    }\n    return Promise.reject(`Где-то ошибочка:( : ${response.status}`);\n  }\n\n  getInitialData() {\n    return Promise.all([this.getUserInfo(), this.getInitialCards()]);\n  }\n\n  getUserInfo() {\n    return fetch(`${this._url}/users/me`, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${localStorage.getItem(\"jwt\")}`,\n      },\n      credentials: this._credentials,\n    }).then((response) => this._getResponseData(response));\n  }\n\n  getInitialCards() {\n    return fetch(`${this._url}/cards`, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${localStorage.getItem(\"jwt\")}`,\n      },\n      credentials: this._credentials,\n    }).then((response) => this._getResponseData(response));\n  }\n\n  editUserInfo(name, email) {\n    return fetch(`${this._url}/users/me`, {\n      method: \"PATCH\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${localStorage.getItem(\"jwt\")}`,\n      },\n      credentials: this._credentials,\n      body: JSON.stringify({\n        name: name,\n        email: email,\n      }),\n    }).then((response) => this._getResponseData(response));\n  }\n\n  deleteCard(cardId) {\n    return fetch(`${this._url}/cards/${cardId}`, {\n      method: \"DELETE\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${localStorage.getItem(\"jwt\")}`,\n      },\n      credentials: this._credentials,\n    }).then((response) => this._getResponseData(response));\n  }\n\n}\n\nconst api = new Api({\n  // baseUrl: \"https://api.mesto.kostyarad.nomoreparties.sbs\",\n  credentials: \"include\",\n  baseUrl: \"http://localhost:3000\",\n});\n\nexport default api;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}