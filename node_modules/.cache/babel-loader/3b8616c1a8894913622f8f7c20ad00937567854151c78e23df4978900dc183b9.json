{"ast":null,"code":"// !!!!!!!!\n// export const BASE_URL = \"https://api.mesto.kostyarad.nomoreparties.sbs\";\nexport var BASE_URL=\"http://localhost:3000\";function getResponseData(res){if(res.ok){return res.json();}return Promise.reject(\"\\u0413\\u0434\\u0435-\\u0442\\u043E \\u043E\\u0448\\u0438\\u0431\\u043E\\u0447\\u043A\\u0430:( : \".concat(res.status));}export function register(name,email,password){return fetch(\"\".concat(BASE_URL,\"/signup\"),{credentials:\"include\",method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({name:name,email:email,password:password})}).then(function(res){return getResponseData(res);});}export var login=function login(email,password){return fetch(\"\".concat(BASE_URL,\"/signin\"),{credentials:\"include\",method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({email:email,password:password})}).then(function(res){return getResponseData(res);}).then(function(data){if(data.jwt){localStorage.setItem(\"jwt\",data.jwt);return data.jwt;}});};export function getContent(jwt){return fetch(\"\".concat(BASE_URL,\"/users/me\"),{credentials:\"include\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(jwt)//\"Authorization\": `Bearer ${localStorage.getItem('jwt')}`,\n}}).then(function(res){return getResponseData(res);}).then(function(data){return data;});}","map":{"version":3,"names":["BASE_URL","getResponseData","res","ok","json","Promise","reject","concat","status","register","name","email","password","fetch","credentials","method","headers","body","JSON","stringify","then","login","data","jwt","localStorage","setItem","getContent","Authorization"],"sources":["/Users/konstantinradcenko/dev/Diploma/movies-explorer-frontend/src/utils/auth.js"],"sourcesContent":["// !!!!!!!!\n// export const BASE_URL = \"https://api.mesto.kostyarad.nomoreparties.sbs\";\nexport const BASE_URL = \"http://localhost:3000\";\n\nfunction getResponseData(res) {\n  if (res.ok) {\n    return res.json();\n  }\n  return Promise.reject(`Где-то ошибочка:( : ${res.status}`);\n}\n\nexport function register(name, email, password) {\n  return fetch(`${BASE_URL}/signup`, {\n    credentials: \"include\",\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({ name, email, password }),\n  }).then((res) => getResponseData(res));\n}\n\nexport const login = (email, password) => {\n  return fetch(`${BASE_URL}/signin`, {\n    credentials: \"include\",\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({ email, password }),\n  })\n    .then((res) => getResponseData(res))\n    .then((data) => {\n      if (data.jwt) {\n        localStorage.setItem(\"jwt\", data.jwt);\n        return data.jwt;\n      }\n    });\n};\n\nexport function getContent(jwt) {\n  return fetch(`${BASE_URL}/users/me`, {\n    credentials: \"include\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${jwt}`,\n      //\"Authorization\": `Bearer ${localStorage.getItem('jwt')}`,\n    },\n  })\n    .then((res) => getResponseData(res))\n    .then((data) => data);\n}\n"],"mappings":"AAAA;AACA;AACA,MAAO,IAAM,CAAAA,QAAQ,CAAG,uBAAuB,CAE/C,QAAS,CAAAC,eAAeA,CAACC,GAAG,CAAE,CAC5B,GAAIA,GAAG,CAACC,EAAE,CAAE,CACV,MAAO,CAAAD,GAAG,CAACE,IAAI,CAAC,CAAC,CACnB,CACA,MAAO,CAAAC,OAAO,CAACC,MAAM,yFAAAC,MAAA,CAAwBL,GAAG,CAACM,MAAM,CAAE,CAAC,CAC5D,CAEA,MAAO,SAAS,CAAAC,QAAQA,CAACC,IAAI,CAAEC,KAAK,CAAEC,QAAQ,CAAE,CAC9C,MAAO,CAAAC,KAAK,IAAAN,MAAA,CAAIP,QAAQ,YAAW,CACjCc,WAAW,CAAE,SAAS,CACtBC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAET,IAAI,CAAJA,IAAI,CAAEC,KAAK,CAALA,KAAK,CAAEC,QAAQ,CAARA,QAAS,CAAC,CAChD,CAAC,CAAC,CAACQ,IAAI,CAAC,SAAClB,GAAG,QAAK,CAAAD,eAAe,CAACC,GAAG,CAAC,GAAC,CACxC,CAEA,MAAO,IAAM,CAAAmB,KAAK,CAAG,QAAR,CAAAA,KAAKA,CAAIV,KAAK,CAAEC,QAAQ,CAAK,CACxC,MAAO,CAAAC,KAAK,IAAAN,MAAA,CAAIP,QAAQ,YAAW,CACjCc,WAAW,CAAE,SAAS,CACtBC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAER,KAAK,CAALA,KAAK,CAAEC,QAAQ,CAARA,QAAS,CAAC,CAC1C,CAAC,CAAC,CACCQ,IAAI,CAAC,SAAClB,GAAG,QAAK,CAAAD,eAAe,CAACC,GAAG,CAAC,GAAC,CACnCkB,IAAI,CAAC,SAACE,IAAI,CAAK,CACd,GAAIA,IAAI,CAACC,GAAG,CAAE,CACZC,YAAY,CAACC,OAAO,CAAC,KAAK,CAAEH,IAAI,CAACC,GAAG,CAAC,CACrC,MAAO,CAAAD,IAAI,CAACC,GAAG,CACjB,CACF,CAAC,CAAC,CACN,CAAC,CAED,MAAO,SAAS,CAAAG,UAAUA,CAACH,GAAG,CAAE,CAC9B,MAAO,CAAAV,KAAK,IAAAN,MAAA,CAAIP,QAAQ,cAAa,CACnCc,WAAW,CAAE,SAAS,CACtBE,OAAO,CAAE,CACP,cAAc,CAAE,kBAAkB,CAClCW,aAAa,WAAApB,MAAA,CAAYgB,GAAG,CAC5B;AACF,CACF,CAAC,CAAC,CACCH,IAAI,CAAC,SAAClB,GAAG,QAAK,CAAAD,eAAe,CAACC,GAAG,CAAC,GAAC,CACnCkB,IAAI,CAAC,SAACE,IAAI,QAAK,CAAAA,IAAI,GAAC,CACzB"},"metadata":{},"sourceType":"module","externalDependencies":[]}