{"ast":null,"code":"import _slicedToArray from\"/Users/konstantinradcenko/dev/Diploma/movies-explorer-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";/* eslint-disable react-hooks/exhaustive-deps */import React from\"react\";import useValidateForm from\"../../hooks/useValidateForm\";import{CurrentUserContext}from\"../../contexts/CurrentUserContext\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Profile(_ref){var onUpdateUser=_ref.onUpdateUser,handleExitClick=_ref.handleExitClick,ProfileErrorText=_ref.ProfileErrorText;var _useValidateForm=useValidateForm(),handleInputChange=_useValidateForm.handleInputChange,setInputValues=_useValidateForm.setInputValues,inputValues=_useValidateForm.inputValues,isFormValid=_useValidateForm.isFormValid;var currentUser=React.useContext(CurrentUserContext);var _React$useState=React.useState(true),_React$useState2=_slicedToArray(_React$useState,2),areInputsdisabled=_React$useState2[0],setAreInputsdisabled=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),isEditing=_React$useState4[0],setIsEditing=_React$useState4[1];function handleSubmit(evt){evt.preventDefault();var name=inputValues.name,email=inputValues.email;onUpdateUser(name,email);setIsEditing(!isEditing);setAreInputsdisabled(!areInputsdisabled);}React.useEffect(function(){setInputValues({name:currentUser.name,email:currentUser.email});},[]);function handleEditClick(){setAreInputsdisabled(!areInputsdisabled);setIsEditing(!isEditing);}return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"form\",{className:\"profile-form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"profile-form__heading\",children:[\"\\u041F\\u0440\\u0438\\u0432\\u0435\\u0442, \",currentUser.name,\"!\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-form__container\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"profile-form__text\",children:\"\\u0418\\u043C\\u044F\"}),/*#__PURE__*/_jsx(\"input\",{className:\"profile-form__input\",type:\"name\",name:\"name\",id:\"name\",minLength:\"2\",disabled:areInputsdisabled,maxLength:\"20\",value:(inputValues===null||inputValues===void 0?void 0:inputValues.name)||\"\",onChange:handleInputChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-form__container\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"profile-form__text\",children:\"E-mail\"}),/*#__PURE__*/_jsx(\"input\",{className:\"profile-form__input\",type:\"email\",name:\"email\",id:\"email\",minLength:\"3\",disabled:areInputsdisabled,maxLength:\"50\",value:(inputValues===null||inputValues===void 0?void 0:inputValues.email)||\"\",onChange:handleInputChange})]}),isEditing?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"profile-form__error\",children:ProfileErrorText}),/*#__PURE__*/_jsx(\"button\",{disabled:!isFormValid,type:\"submit\",\"aria-label\":\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0435\\u043D\\u0438\\u0435 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0445 \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044F\",className:\"button profile-form__save-button \".concat(!isFormValid&&\"profile-form__save-button_inactive\"),children:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"p\",{className:\"link profile-form__link\",onClick:handleEditClick,children:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"p\",{className:\"link profile-form__link\",onClick:handleExitClick,children:\"\\u0412\\u044B\\u0439\\u0442\\u0438 \\u0438\\u0437 \\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442\\u0430\"})]})]})});}export default Profile;","map":{"version":3,"names":["React","useValidateForm","CurrentUserContext","jsxs","_jsxs","jsx","_jsx","Fragment","_Fragment","Profile","_ref","onUpdateUser","handleExitClick","ProfileErrorText","_useValidateForm","handleInputChange","setInputValues","inputValues","isFormValid","currentUser","useContext","_React$useState","useState","_React$useState2","_slicedToArray","areInputsdisabled","setAreInputsdisabled","_React$useState3","_React$useState4","isEditing","setIsEditing","handleSubmit","evt","preventDefault","name","email","useEffect","handleEditClick","children","className","onSubmit","type","id","minLength","disabled","maxLength","value","onChange","concat","onClick"],"sources":["/Users/konstantinradcenko/dev/Diploma/movies-explorer-frontend/src/components/Profile/Profile.js"],"sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\nimport React from \"react\";\nimport useValidateForm from \"../../hooks/useValidateForm\";\nimport { CurrentUserContext } from \"../../contexts/CurrentUserContext\";\n\nfunction Profile({ onUpdateUser, handleExitClick, ProfileErrorText }) {\n  const { handleInputChange, setInputValues, inputValues, isFormValid } =\n    useValidateForm();\n  const currentUser = React.useContext(CurrentUserContext);\n  const [areInputsdisabled, setAreInputsdisabled] = React.useState(true);\n  const [isEditing, setIsEditing] = React.useState(false);\n\n  function handleSubmit(evt) {\n    evt.preventDefault();\n    const { name, email } = inputValues;\n    onUpdateUser(name, email);\n    setIsEditing(!isEditing);\n    setAreInputsdisabled(!areInputsdisabled);\n  }\n\n  React.useEffect(() => {\n    setInputValues({ name: currentUser.name, email: currentUser.email });\n  }, []);\n\n  function handleEditClick() {\n    setAreInputsdisabled(!areInputsdisabled);\n    setIsEditing(!isEditing);\n  }\n\n  return (\n    <>\n      <form className=\"profile-form\" onSubmit={handleSubmit}>\n        <h2 className=\"profile-form__heading\">Привет, {currentUser.name}!</h2>\n        <div className=\"profile-form__container\">\n          <p className=\"profile-form__text\">Имя</p>\n          <input\n            className=\"profile-form__input\"\n            type=\"name\"\n            name=\"name\"\n            id=\"name\"\n            minLength=\"2\"\n            disabled={areInputsdisabled}\n            maxLength=\"20\"\n            value={inputValues?.name || \"\"}\n            onChange={handleInputChange}\n          />\n        </div>\n        <div className=\"profile-form__container\">\n          <p className=\"profile-form__text\">E-mail</p>\n          <input\n            className=\"profile-form__input\"\n            type=\"email\"\n            name=\"email\"\n            id=\"email\"\n            minLength=\"3\"\n            disabled={areInputsdisabled}\n            maxLength=\"50\"\n            value={inputValues?.email || \"\"}\n            onChange={handleInputChange}\n          />\n        </div>\n        {isEditing ? (\n          <>\n            <span className=\"profile-form__error\">{ProfileErrorText}</span>\n            <button\n              disabled={!isFormValid}\n              type=\"submit\"\n              aria-label=\"Сохранение данных профиля\"\n              className={`button profile-form__save-button ${\n                !isFormValid && \"profile-form__save-button_inactive\"\n              }`}\n            >\n              Сохранить\n            </button>\n          </>\n        ) : (\n          <>\n            <p className=\"link profile-form__link\" onClick={handleEditClick}>\n              Редактировать\n            </p>\n            <p className=\"link profile-form__link\" onClick={handleExitClick}>\n              Выйти из аккаунта\n            </p>\n          </>\n        )}\n      </form>\n    </>\n  );\n}\n\nexport default Profile;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}